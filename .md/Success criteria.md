# 学習用データとしての「成功判定基準」

このドキュメントは、  
**「FreeSewing などで生成した型紙データが、学習用データとして成功と言える状態」** を整理したものです。

- 対象：
  - 1 着ごとのデータ（1 サンプル）
  - たくさん生成した時のデータセット全体
  - パイプライン／システムとしての状態
- 目的：
  - 「これは学習に使ってよい」と自信を持って言える基準を明確にすること

---

## 1. 1 サンプル（1 着）の成功条件

### 1-1. 形（ジオメトリ）が破綻していない

- パーツの輪郭がちゃんと閉じている（パス切れ・隙間がない）
- 異常なトゲ・自分自身との交差・極端なねじれがない
- 前身頃／後身頃／袖／衿／カフスなど、  
  服として妥当なパーツ構成になっている
- FreeSewing の出力としてエラーになっていない

👉 「パタンナーの目で見て、不自然すぎる形ではない」こと。

---

### 1-2. メタデータ（ラベル）が揃っている

最低限、次の情報が **サンプルごとに一意に分かる** こと：

- **体型情報**
  - `body_id`（例：`BODY_MEN_20_MID_JIS_M`）
  - 胸囲／ウエスト／ヒップ／身長 などのヌード寸法一式
- **骨格・姿勢情報（オプション）**
  - `shape_id`（例：`SHAPE_NEKOSE`, `SHAPE_IGARI` など）
- **スタイル情報**
  - `fs_pattern_id`（例：`simon`, `teagan` など）
  - 必要に応じて `pattern_id`（内部用のスタイル ID）
- **原型情報**
  - `block_id_main`（例：`BLOCK_SHIRT_MEN_BRIAN_BASE`）
- **測定セット**
  - `measurements`（FreeSewing に渡した全寸法）
- **バージョン情報**
  - `version`（パラメータ調整の履歴管理用）
  - 日付・生成時の FS バージョンなどが分かるとなお良い

👉 「この型紙が、どんな人・どんな骨格・どんな服を想定しているか」が  
　**後から説明できる状態**。

---

### 1-3. 再現性がある

- 同じ
  - `body_id`
  - `shape_id`
  - `fs_pattern_id`
  - `version`
  - `measurements`
    を使って再度生成すれば、**同じパターン形状が再度出せる**。
- ライブラリバージョン（`@freesewing/*`）も含めて、  
  どの条件で生成したかが記録されている。

👉 「後で再生成・比較・再学習ができる」という意味での成功。

---

### 1-4. 人間の目で見て「あり得る」形である

- 肩線の傾き・アームホールの形・袖山の高さなどが  
  **実務感覚から大きく外れていない**。
- 「この寸法でこの形なら、まあそうだよね」と言えるレベル。

👉 ここはパタンナーの感覚が効く部分。  
　**明らかに“変な服”になっていないこと**。

---

## 2. データセット全体の成功条件

### 2-1. バリエーションが意味を持っている

- サイズ展開（BodyMaster）に幅がある
  - 例：S / M / L、LOW / MID / HIGH、SLIM / FULL など
- 骨格展開（BodyShapeMaster）にパターンがある
  - 例：標準・猫背・ハトムネ・怒肩・なで肩
- スタイル展開（PatternMaster_CORE）がある
  - 例：シャツ／パンツ／ジャケット／コート／スカート／ワンピース…

👉 「同じような型紙のコピー」ではなく、  
　**体型・骨格・スタイルの違いが反映された多様なサンプルがある**こと。

---

### 2-2. ラベルと形の変化が対応している（整合性）

- `BODY_MEN_20_MID_JIS_M` → `BODY_MEN_20_MID_JIS_L` と変えると、  
  パターンもちゃんと大きくなる。
- `shape_id = SHAPE_NEKOSE`（猫背）を指定すると、  
  後身頃が少し長く／前身頃が少し短くなるなど、  
  **「猫背らしい差」がちゃんとパターンに出ている**。
- 同一スタイル（例：simon）でも、  
  体型・骨格が変われば、形がロジカルに変化している。

👉 ラベル（Body / Shape / Pattern）とパターン形状の関係が  
　**一貫している＝機械学習がルールを学びやすい状態**。

---

### 2-3. ノイズや重複が少ない

- 完全に同じ条件のサンプル（同じ body_id / shape_id / pattern_id / version）が  
  無意味に大量に含まれていない。
- エラー・破綻したパターン（極端なねじれ・明らかなバグ形状）は  
  データセットから除外しているか、フラグを立てて区別できる。

👉 **「量だけ多いゴミ」ではなく、「量も質もバランスのとれたコーパス」** を目指す。

---

### 2-4. ログとして追跡可能

- 各サンプル（型紙）に固有 ID が振られている。
- その ID から、
  - どの Body / Shape / Pattern / Block だったか
  - どの measurements / version だったか
  - いつ・どの FS バージョンで生成したか  
    がたどれる。

👉 「このサンプルちょっと変だな？」と思ったときに、  
　**元データ・条件にすぐ戻れる状態**。

---

## 3. パイプラインとしての成功条件

### 3-1. 一貫性のある流れができている

パイプラインの流れ：

1. BodyMaster から `body_id` を選ぶ
2. 必要なら BodyShapeMaster から `shape_id` を選ぶ
3. PatternMaster_CORE から `fs_pattern_id` と `block_id_main` を選ぶ
4. 1〜3 を元に MeasurementProfile を生成
5. MeasurementProfile.measurements を FreeSewing に渡して SVG を生成
6. SVG と meta（Body / Shape / Pattern / Block / measurements / version）を保存

これが自動で・安定して回ること。

---

### 3-2. 再実行・拡張がしやすい

- Body を増やしても（S〜XL など）、  
  基本的には BodyMaster に行を追加するだけで展開できる。
- 骨格パターンを増やしても、BodyShapeMaster に行を追加するだけで済む。
- 新しいパターン（パンツ／コートなど）を増やすときも、
  - PatternMaster_CORE に 1 行追加
  - 対応する measurementBuilder を追加
    という **一定のパターンで拡張**できる。

👉 「最初に作った仕組みを、苦労せず育てていけること」が成功。

---

## 4. 実務的な“最初の成功ライン”

現実的に、最初に目指すべき「成功ライン」は：

1. **MEN 標準体型 × Simon シャツ × 骨格補正なし**

   - 形がまとも
   - MeasurementProfile とメタが保存されている
   - 再実行で同じ SVG が出る

2. **MEN 標準体型 × Simon シャツ × 猫背（SHAPE_NEKOSE）**

   - 「普通」と「猫背」で、  
     後身頃／前身頃などに **“猫背らしい差”** が出ている

3. 上記 2 サンプルが、
   - Body / Shape / Pattern / measurements が整合していて
   - あなたが見て「確かにこれは教科書として“アリ”」と感じられる

ここまで行けば、

> 「上質でユニークな学習用パターンデータを作るための、  
>  最初の 1 セットとしては成功」

と判断して良いラインになります。

---

## 5. まとめ（チェックリスト）

最後に、チェックリストとして：

- [ ] パターン形状が破綻していない
- [ ] Body / Shape / Pattern / Block / measurements / version のラベルが揃っている
- [ ] 同じ条件なら再生成しても同じ形が出る
- [ ] 人間の目で見て「あり得る型紙」になっている
- [ ] 体型・骨格・スタイルの違いが、パターン形状の違いとして出ている
- [ ] ノイズや重複が少ない
- [ ] 各サンプルがあとから追える（ID・ログ）
- [ ] パイプラインを拡張しても、同じ設計思想で増やせる

これらに「だいたい YES」と言えるようになったら、  
そのデータは **“学習データとして成功している”** と言ってよい状態です。
